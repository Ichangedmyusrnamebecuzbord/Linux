<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/x-icon" href="/IMGS/MSG.png">
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mally's Sus Gaming</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html, body {
            height: 100%;
            width: 100%;
        }
        body {
            font-family: Arial, sans-serif;
            background: url('Backround.gif') no-repeat center center fixed;
            background-size: cover;
            color: white;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            height: 100vh;
            padding-right: 48%;
        }

        /* Loading screen styles */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .loader {
            border: 6px solid #f3f3f3;
            border-top: 6px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Progress Bar */
        .progress-bar-container {
            width: 60%;
            background: #222;
            border-radius: 10px;
            margin-top: 15px;
            overflow: hidden;
        }
        .progress-bar {
            width: 0%;
            height: 10px;
            background: #0044cc;
            transition: width 5s ease-in-out;
        }

        /* Click to start */
        #click-to-start {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2000;
        }
    </style>
</head>
<audio id="background-music" loop>
    <source src="CS.mp3" type="audio/mpeg">
</audio>
<body onclick="openGame()">

  
     <!-- Click to start screen (only if pop-ups are blocked) -->
     <div id="click-to-start" onclick="openGame()">Click anywhere to start Mally's Sus Gaming or open pop-ups</div>
 
     <!-- Loading Screen -->
   
  
     <div id="loading-screen">
         <div class="loader"></div>
         <p>Loading Mally's Sus Gaming...</p>

        <div class="progress-bar-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </div>

    <script>


         document.addEventListener("DOMContentLoaded", () => {
             console.log("DOMContentLoaded event fired");
 
             const clickToStart = document.getElementById("click-to-start");
             let popupBlocked = false;
 
             // Check if pop-ups are allowed by opening a test window
             try {
                 let testWin = window.open("", "_blank");
                 if (!testWin || testWin.closed || typeof testWin.closed === "undefined") {
                     popupBlocked = true; // Pop-ups are blocked
                 } else {
                     testWin.close(); // Pop-ups are allowed, close test window
                 }
             } catch (err) {
                 popupBlocked = true;
             }
 
             if (popupBlocked) {
                 console.log("Popups are blocked. User must click to start.");
                 clickToStart.style.display = "flex"; // Show "Click to start" screen
             } else {
                 console.log("Popups are allowed. Starting game automatically.");
                 startGame();
             }
         });
 
         function startGame() {
             document.getElementById("click-to-start").style.display = "none"; // Hide the click-to-start screen
 
             // Start the progress bar animation
             const progressBar = document.getElementById("progress-bar");
             progressBar.style.width = "100%";  // Fill the bar over 5 seconds
 
             // After 5 seconds, automatically load the game in a new window
             setTimeout(() => {
                 openGame(); // Trigger openGame to open Home.html in a new window
             }, 3000); // Wait for 5 seconds before automatically opening the game
         }
 
 function openGame() {
     var win = window.open();
     var url = "Home.html";
     
     win.document.write('<html><head><title>Mally\'s Sus Gaming</title><style>body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }</style></head><body></body></html>');
     
     var link = win.document.createElement('link');
     link.rel = 'icon';
     link.type = 'image/x-icon';
     link.href = 'https://msg2.pages.dev/IMGS/MSG.png';
     win.document.head.appendChild(link); // Append favicon after writing document
 
     var iframe = win.document.createElement('iframe');
     iframe.style.width = "100%";
     iframe.style.height = "100%";
     iframe.style.border = "none";
     iframe.src = url;
     win.document.body.appendChild(iframe);
     
     location.replace("https://launchpad.classlink.com/lwsd");


 }

         
        

        // Disable right-click and F12
        document.addEventListener("contextmenu", (event) => event.preventDefault());
        document.addEventListener("keydown", (event) => {
            if (event.key === "F12" || (event.ctrlKey && event.shiftKey && event.key === "I")) {
                event.preventDefault();
            }
        });
    </script>

</body>
</html>
